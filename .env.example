# DocXP V1 Local Development Environment Configuration
# Copy this to .env and update with your values

# ====== AWS BEDROCK CONFIGURATION (REQUIRED) ======
# These credentials are REQUIRED for DocXP V1 to function
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_SESSION_TOKEN=your-session-token-if-using-temporary-creds
AWS_REGION=us-east-1

# Alternative: Use AWS CLI profile instead of explicit credentials
# AWS_PROFILE=your-aws-profile-name

# Bedrock Model Configuration
BEDROCK_MODEL_ID=anthropic.claude-3-5-sonnet-20241022-v2:0
BEDROCK_EMBED_MODEL_ID=amazon.titan-embed-text-v2:0

# ====== V1 LOCAL STACK CONFIGURATION ======
# These are auto-configured by podman-compose.yml but can be overridden

# OpenSearch (Single-node with auto-dimension detection)
OPENSEARCH_HOST=opensearch
OPENSEARCH_PORT=9200
OPENSEARCH_USE_SSL=false
OPENSEARCH_VERIFY_CERTS=false
OPENSEARCH_INDEX_NAME=docxp_chunks
OPENSEARCH_EMBED_DIM_AUTO_DETECT=true

# PostgreSQL (Replaces dual SQLite architecture)
DATABASE_URL=postgresql+asyncpg://docxp_user:docxp_local_dev_2024@postgres:5432/docxp

# Redis (Queue management with RQ)
REDIS_URL=redis://redis:6379/0
RQ_REDIS_URL=redis://redis:6379/1

# MinIO S3-Compatible Storage
S3_ENDPOINT_URL=http://minio:9000
S3_ACCESS_KEY_ID=docxp-root
S3_SECRET_ACCESS_KEY=docxp-local-dev-2024
S3_BUCKET_NAME=docxp-artifacts
S3_REGION=us-east-1

# ====== APPLICATION CONFIGURATION ======
APP_ENV=development
LOG_LEVEL=INFO
API_HOST=0.0.0.0
API_PORT=8000
ENABLE_CORS=true

# RRF Hybrid Search Parameters (GPT-5 specified)
RRF_K=60
RRF_BM25_WEIGHT=1.2
RRF_KNN_WEIGHT=1.0

# Performance SLOs
TARGET_SEARCH_LATENCY_P50_MS=700
TARGET_SEARCH_LATENCY_P95_MS=1200
TARGET_E2E_LATENCY_P95_MS=2000

# ====== LEGACY CONFIGURATION (For Migration) ======
# Keep these during migration phase
VECTOR_DB_PATH=./data/vector_db
VECTOR_DB_ENABLED=false  # Disable ChromaDB in favor of OpenSearch

# ====== DEVELOPMENT OVERRIDES ======
# Optional: Force specific embedding dimension (not recommended)
# OPENSEARCH_EMBED_DIM=1024

# Optional: Enable debug logging for specific components
# OPENSEARCH_DEBUG=true
# RQ_DEBUG=true
# BEDROCK_DEBUG=true